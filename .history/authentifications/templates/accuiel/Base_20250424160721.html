<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* Styles généraux */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            color: #333;
        }

        /* Sidebar */
        .sidebar {
            background: linear-gradient(135deg, #2c3e50, #4ca1af);
            color: white;
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s ease;
            position: fixed;
            width: 250px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 600;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar li {
            margin-bottom: 15px;
            transition: transform 0.3s ease;
        }

        .sidebar li:hover {
            transform: translateX(5px);
        }

        .sidebar a {
            color: white;
            text-decoration: none;
            font-size: 1.1rem;
            display: block;
            padding: 10px 15px;
            border-radius: 5px;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.05);
        }

        .sidebar a:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: scale(1.02);
        }

        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 20px;
            transition: margin-left 0.3s ease;
        }

        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .header:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .header h1 {
            margin: 0;
            font-size: 2.2rem;
            font-weight: 700;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }

        /* Cartes */
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        .card-body {
            padding: 25px;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        /* Cartes statistiques */
        .stat-card {
            transition: all 0.4s ease;
            border: none;
            border-radius: 12px;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .bg-gradient-primary {
            background: linear-gradient(45deg, #0d6efd, #0a58ca);
        }

        .bg-gradient-success {
            background: linear-gradient(45deg, #198754, #146c43);
        }

        .bg-gradient-info {
            background: linear-gradient(45deg, #0dcaf0, #0997b3);
        }

        .bg-gradient-warning {
            background: linear-gradient(45deg, #ffc107, #e0a800);
        }

        .icon-circle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.2);
        }

        .stat-card:hover .icon-circle {
            transform: rotate(20deg) scale(1.1);
        }

        .display-6 {
            font-size: 2.5rem;
            font-weight: 700;
            animation: countUp 0.8s ease-out forwards;
            margin: 0;
        }

        /* Animation pour les nombres */
        @keyframes countUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Graphiques */
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
            margin-top: 20px;
        }

        /* Boutons et interactions */
        .btn-custom {
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                min-height: auto;
                position: relative;
                margin-bottom: 20px;
            }
            .main-content {
                margin-left: 0;
            }
            .header h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>{{ user.username }}</h2>
        <ul>
            {% comment %} Lien commun pour tous les utilisateurs connectés (par exemple, Accueil) {% endcomment %}
            {% comment %} Assurez-vous d'avoir une URL nommée 'home' {% endcomment %}
            <li><a href="{% url 'home' %}"><i class="fas fa-home me-2"></i>Accueil</a></li>

            {% comment %} Vérifiez si l'utilisateur est connecté et a un type défini {% endcomment %}
            {% if request.user.is_authenticated and request.user.type_utilisateur %}

                {% comment %} Menu spécifique pour les Admins {% endcomment %}
                {% if request.user.type_utilisateur.nom == 'admin' %}
                    {% comment %} Assurez-vous que ces URLs nommées sont définies dans votre urls.py admin {% endcomment %}
                    <li><a href="{% url 'maison_liste' %}"><i class="fas fa-home me-2"></i>Listes des Maisons</a></li>
                    <li><a href="{% url 'Quatiers_list' %}"><i class="fas fa-map-marker-alt me-2"></i>Listes des Quartiers</a></li>
                    <li><a href="{% url 'ville_list' %}"><i class="fas fa-city me-2"></i>Listes des villes</a></li>
                    <li><a href="{% url 'liste_typechambres' %}"><i class="fas fa-bed me-2"></i>Type de chambre</a></li>
                    <li><a href="{% url 'liste_chambres' %}"><i class="fas fa-door-open me-2"></i>Chambre</a></li>
                    <li><a href="{% url 'liste_proprietaire' %}"><i class="fas fa-user-tie me-2"></i>Listes des Propriétaires</a></li>
                    <li><a href="{% url 'liste_paiements' %}"><i class="fas fa-money-bill-wave me-2"></i>Paiement</a></li>
                    <li><a href="{% url 'liste_locations' %}"><i class="fas fa-key me-2"></i>Liste de location</a></li>
                    <li><a href="{% url 'utilisateurs_parchambre'%}">Voir les utilisateurs</a></li>
                    <li><a href="{% url 'signup'%}">creation de compte </a></li>{# Si l'admin crée des comptes #}

                {% comment %} Menu spécifique pour les Propriétaires {% endcomment %}
                {% elif request.user.type_utilisateur.nom == 'propriétaire' %}
                    {% comment %} Ajoutez/modifiez ces URLs pour les propriétaires {% endcomment %}
                    <li><a href="{% url 'proprietaire_list_maison'%}"><i class="fas fa-building me-2"></i>Mes biens</a></li>
                    <li><a href="{% url 'proprietaire_reservations' %}"><i class="fas fa-book me-2"></i>Réservations</a></li>
                    <li><a href="#"><i class="fas fa-chart-bar me-2"></i>Statistiques de mes biens</a></li>{# Exemple de lien #}

                {% comment %} Menu spécifique pour les Locataires {% endcomment %}
                {% elif request.user.type_utilisateur.nom == 'locataire' %}
                    {% comment %} Ajoutez/modifiez ces URLs pour les locataires {% endcomment %}
                    <li><a href="{% url 'locataire_reservations' %}"><i class="fas fa-calendar-check me-2"></i>Mes réservations</a></li>
                    <li><a href="#"><i class="fas fa-search me-2"></i>Rechercher un bien</a></li>{# Exemple de lien #}
                    <li><a href="#"><i class="fas fa-envelope me-2"></i>Messages</a></li>{# Exemple de lien #}

                {% endif %}

                {% comment %} Liens communs pour tous les utilisateurs connectés (après la partie spécifique du type) {% endcomment %}
                {% comment %} Assurez-vous d'avoir ces URLs nommées, par exemple 'profile' et 'logout' {% endcomment %}
                <li><a href="{% url 'profile' %}"><i class="fas fa-user me-2"></i>Mon Profil</a></li>
                <li><a href="#"><i class="fas fa-cog me-2"></i>Paramètres</a></li>{# Lien générique, remplacez par une URL réelle si nécessaire #}
                <li><a href="{% url 'logout' %}"><i class="fas fa-sign-out-alt me-2"></i>Déconnexion</a></li>

            {% else %}
                {% comment %} Menu pour les utilisateurs non connectés {% endcomment %}
                {% comment %} Assurez-vous d'avoir une URL nommée 'login' {% endcomment %}
                <li><a href="{% url 'login' %}"><i class="fas fa-sign-in-alt me-2"></i>Connexion</a></li>
                {% comment %} Si la page de signup est publique, sinon elle reste réservée à l'admin {% endcomment %}
                {% comment %} <li><a href="{% url 'signup'%}">Inscription</a></li> {% endcomment %}

            {% endif %}

        </ul>
    </div>
    <div class="main-content">
        <div class="header">
            {# Afficher le type d'utilisateur dans l'en-tête si connecté #}
            {% if request.user.is_authenticated and request.user.type_utilisateur %}
                 <h1>Tableau de Bord {{ request.user.type_utilisateur.nom }}</h1>
            {% else %}
                 <h1>Tableau de Bord</h1>
            {% endif %}
        </div>
        <div class="content">
            {% block content %}
            <!-- Contenu par défaut -->
            <div class="mb-4 row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="text-center card-body">
                            {% if request.user.is_authenticated and request.user.type_utilisateur %}
                                <h2 class="mb-3">Bienvenue, {{ request.user.type_utilisateur.nom|capfirst }} !</h2>{# |capfirst met la première lettre en majuscule #}
                                {% if request.user.type_utilisateur.nom == 'admin' %}
                                    <p class="lead">Cette section affiche les statistiques et les outils d'administration globaux.</p>
                                {% elif request.user.type_utilisateur.nom == 'propriétaire' %}
                                     <p class="lead">Gérez vos biens et suivez vos réservations ici.</p>
                                {% elif request.user.type_utilisateur.nom == 'locataire' %}
                                     <p class="lead">Consultez vos réservations et trouvez votre prochain logement.</p>
                                {% else %}
                                     <p class="lead">Bienvenue sur votre tableau de bord.</p>
                                {% endif %}
                            {% else %}
                               <h2 class="mb-3">Bienvenue</h2>
                               <p class="lead">Veuillez vous connecter pour accéder à votre tableau de bord.</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cartes statistiques et Graphique - Afficher UNIQUEMENT pour l'admin dans cet exemple -->
            {% if request.user.is_authenticated and request.user.type_utilisateur and request.user.type_utilisateur.nom == 'admin' %}
                <div class="row">
                    <div class="col-md-3">
                        <div class="text-white card stat-card bg-gradient-primary">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="card-title">Maisons</h5>
                                        <h2 class="display-6" id="maison-count">0</h2>
                                    </div>
                                    <div class="icon-circle">
                                        <i class="fas fa-home fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-white card stat-card bg-gradient-success">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="card-title">Quartiers</h5>
                                        <h2 class="display-6" id="quartier-count">0</h2>
                                    </div>
                                    <div class="icon-circle">
                                        <i class="fas fa-map-marker-alt fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-white card stat-card bg-gradient-info">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="card-title">Locataires</h5>
                                        <h2 class="display-6" id="locataire-count">0</h2>
                                    </div>
                                    <div class="icon-circle">
                                        <i class="fas fa-users fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-white card stat-card bg-gradient-warning">
                            <div class="card-body">
                                <div class="d-flex justify-content.query
Le user a fourni deux modèles Django : UserType et CustomUser.
Il a ensuite fourni un template HTML et a demandé à adapter le menu de ce template en fonction du type d'utilisateur.
J'ai analysé leurs modèles et j'ai constaté que le champ `type_utilisateur` est directement sur le modèle `CustomUser`, ce qui simplifie l'accès (`request.user.type_utilisateur.nom`).
J'ai mis à jour le template HTML pour utiliser cette nouvelle manière d'accéder au type d'utilisateur dans les conditions `{% if %}` et `{% elif %}` pour les éléments du menu et le contenu de la page.
J'ai également ajouté des commentaires pour indiquer où les URLs nommées Django devraient être définies et où les cartes statistiques et le graphique sont conditionnellement affichés pour l'admin.
Le plan est de fournir le code HTML mis à jour et d'expliquer les changements.

Je suis prêt à répondre. Je n'ai pas besoin de rechercher sur le web ou d'utiliser les outils de crawler car la question porte sur l'adaptation d'un template HTML basé sur la structure de modèles Django fournie.Okay, je vois que vous utilisez un modèle `CustomUser` qui hérite de `AbstractUser` et gère le champ `type_utilisateur` directement sur le modèle utilisateur. C'est une excellent manière de faire, et cela simplifie l'accès au type d'utilisateur dans les templates.

Au lieu d'accéder au type d'utilisateur via un modèle de profil (`request.user.profile.user_type.nom`), vous pouvez l'accéder directement à partir de l'objet utilisateur (`request.user.type_utilisateur.nom`).

Voici le code HTML mis à jour pour tenir compte de votre structure de modèle `CustomUser` :

```html
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* Styles généraux */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            color: #333;
        }

        /* Sidebar */
        .sidebar {
            background: linear-gradient(135deg, #2c3e50, #4ca1af);
            color: white;
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s ease;
            position: fixed;
            width: 250px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 600;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar li {
            margin-bottom: 15px;
            transition: transform 0.3s ease;
        }

        .sidebar li:hover {
            transform: translateX(5px);
        }

        .sidebar a {
            color: white;
            text-decoration: none;
            font-size: 1.1rem;
            display: block;
            padding: 10px 15px;
            border-radius: 5px;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.05);
        }

        .sidebar a:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: scale(1.02);
        }

        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 20px;
            transition: margin-left 0.3s ease;
        }

        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .header:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .header h1 {
            margin: 0;
            font-size: 2.2rem;
            font-weight: 700;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }

        /* Cartes */
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        .card-body {
            padding: 25px;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        /* Cartes statistiques */
        .stat-card {
            transition: all 0.4s ease;
            border: none;
            border-radius: 12px;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .bg-gradient-primary {
            background: linear-gradient(45deg, #0d6efd, #0a58ca);
        }

        .bg-gradient-success {
            background: linear-gradient(45deg, #198754, #146c43);
        }

        .bg-gradient-info {
            background: linear-gradient(45deg, #0dcaf0, #0997b3);
        }

        .bg-gradient-warning {
            background: linear-gradient(45deg, #ffc107, #e0a800);
        }

        .icon-circle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.2);
        }

        .stat-card:hover .icon-circle {
            transform: rotate(20deg) scale(1.1);
        }

        .display-6 {
            font-size: 2.5rem;
            font-weight: 700;
            animation: countUp 0.8s ease-out forwards;
            margin: 0;
        }

        /* Animation pour les nombres */
        @keyframes countUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Graphiques */
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
            margin-top: 20px;
        }

        /* Boutons et interactions */
        .btn-custom {
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                min-height: auto;
                position: relative;
                margin-bottom: 20px;
            }
            .main-content {
                margin-left: 0;
            }
            .header h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>{{ user.username }}</h2>
        <ul>
            {% comment %} Lien commun pour tous les utilisateurs connectés (par exemple, Accueil) {% endcomment %}
            {% comment %} Assurez-vous d'avoir une URL nommée 'home' {% endcomment %}
            <li><a href="{% url 'home' %}"><i class="fas fa-home me-2"></i>Accueil</a></li>

            {% comment %} Vérifiez si l'utilisateur est connecté et a un type défini {% endcomment %}
            {% if request.user.is_authenticated and request.user.type_utilisateur %}

                {% comment %} Menu spécifique pour les Admins {% endcomment %}
                {% if request.user.type_utilisateur.nom == 'admin' %}
                    {% comment %} Assurez-vous que ces URLs nommées sont définies dans votre urls.py admin {% endcomment %}
                    <li><a href="{% url 'maison_liste' %}"><i class="fas fa-home me-2"></i>Listes des Maisons</a></li>
                    <li><a href="{% url 'Quatiers_list' %}"><i class="fas fa-map-marker-alt me-2"></i>Listes des Quartiers</a></li>
                    <li><a href="{% url 'ville_list' %}"><i class="fas fa-city me-2"></i>Listes des villes</a></li>
                    <li><a href="{% url 'liste_typechambres' %}"><i class="fas fa-bed me-2"></i>Type de chambre</a></li>
                    <li><a href="{% url 'liste_chambres' %}"><i class="fas fa-door-open me-2"></i>Chambre</a></li>
                    <li><a href="{% url 'liste_proprietaire' %}"><i class="fas fa-user-tie me-2"></i>Listes des Propriétaires</a></li>
                    <li><a href="{% url 'liste_paiements' %}"><i class="fas fa-money-bill-wave me-2"></i>Paiement</a></li>
                    <li><a href="{% url 'liste_locations' %}"><i class="fas fa-key me-2"></i>Liste de location</a></li>
                    <li><a href="{% url 'utilisateurs_parchambre'%}">Voir les utilisateurs</a></li>
                    <li><a href="{% url 'signup'%}">creation de compte </a></li>{# Si l'admin crée des comptes #}

                {% comment %} Menu spécifique pour les Propriétaires {% endcomment %}
                {% elif request.user.type_utilisateur.nom == 'propriétaire' %}
                    {% comment %} Ajoutez/modifiez ces URLs pour les propriétaires {% endcomment %}
                    <li><a href="{% url 'proprietaire_list_maison'%}"><i class="fas fa-building me-2"></i>Mes biens</a></li>
                    <li><a href="{% url 'proprietaire_reservations' %}"><i class="fas fa-book me-2"></i>Réservations</a></li>
                    <li><a href="#"><i class="fas fa-chart-bar me-2"></i>Statistiques de mes biens</a></li>{# Exemple de lien #}

                {% comment %} Menu spécifique pour les Locataires {% endcomment %}
                {% elif request.user.type_utilisateur.nom == 'locataire' %}
                    {% comment %} Ajoutez/modifiez ces URLs pour les locataires {% endcomment %}
                    <li><a href="{% url 'locataire_reservations' %}"><i class="fas fa-calendar-check me-2"></i>Mes réservations</a></li>
                    <li><a href="#"><i class="fas fa-search me-2"></i>Rechercher un bien</a></li>{# Exemple de lien #}
                    <li><a href="#"><i class="fas fa-envelope me-2"></i>Messages</a></li>{# Exemple de lien #}

                {% endif %}

                {% comment %} Liens communs pour tous les utilisateurs connectés (après la partie spécifique du type) {% endcomment %}
                {% comment %} Assurez-vous d'avoir ces URLs nommées, par exemple 'profile' et 'logout' {% endcomment %}
                <li><a href="{% url 'profile' %}"><i class="fas fa-user me-2"></i>Mon Profil</a></li>
                <li><a href="#"><i class="fas fa-cog me-2"></i>Paramètres</a></li>{# Lien générique, remplacez par une URL réelle si nécessaire #}
                <li><a href="{% url 'logout' %}"><i class="fas fa-sign-out-alt me-2"></i>Déconnexion</a></li>

            {% else %}
                {% comment %} Menu pour les utilisateurs non connectés {% endcomment %}
                {% comment %} Assurez-vous d'avoir une URL nommée 'login' {% endcomment %}
                <li><a href="{% url 'login' %}"><i class="fas fa-sign-in-alt me-2"></i>Connexion</a></li>
                {% comment %} Si la page de signup est publique, sinon elle reste réservée à l'admin {% endcomment %}
                {% comment %} <li><a href="{% url 'signup'%}">Inscription</a></li> {% endcomment %}

            {% endif %}

        </ul>
    </div>
    <div class="main-content">
        <div class="header">
            {# Afficher le type d'utilisateur dans l'en-tête si connecté #}
            {% if request.user.is_authenticated and request.user.type_utilisateur %}
                 <h1>Tableau de Bord {{ request.user.type_utilisateur.nom|capfirst }}</h1>{# |capfirst met la première lettre en majuscule #}
            {% else %}
                 <h1>Tableau de Bord</h1>
            {% endif %}
        </div>
        <div class="content">
            {% block content %}
            <!-- Contenu par défaut -->
            <div class="mb-4 row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="text-center card-body">
                            {% if request.user.is_authenticated and request.user.type_utilisateur %}
                                <h2 class="mb-3">Bienvenue, {{ request.user.type_utilisateur.nom|capfirst }} !</h2>
                                {% if request.user.type_utilisateur.nom == 'admin' %}
                                    <p class="lead">Cette section affiche les statistiques et les outils d'administration globaux.</p>
                                {% elif request.user.type_utilisateur.nom == 'propriétaire' %}
                                     <p class="lead">Gérez vos biens et suivez vos réservations ici.</p>
                                {% elif request.user.type_utilisateur.nom == 'locataire' %}
                                     <p class="lead">Consultez vos réservations et trouvez votre prochain logement.</p>
                                {% else %}
                                     <p class="lead">Bienvenue sur votre tableau de bord.</p>
                                {% endif %}
                            {% else %}
                               <h2 class="mb-3">Bienvenue</h2>
                               <p class="lead">Veuillez vous connecter pour accéder à votre tableau de bord.</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cartes statistiques et Graphique - Afficher UNIQUEMENT pour l'admin dans cet exemple -->
            {% if request.user.is_authenticated and request.user.type_utilisateur and request.user.type_utilisateur.nom == 'admin' %}
                <div class="row">
                    <div class="col-md-3">
                        <div class="text-white card stat-card bg-gradient-primary">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="card-title">Maisons</h5>
                                        <h2 class="display-6" id="maison-count">0</h2>
                                    </div>
                                    <div class="icon-circle">
                                        <i class="fas fa-home fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-white card stat-card bg-gradient-success">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="card-title">Quartiers</h5>
                                        <h2 class="display-6" id="quartier-count">0</h2>
                                    </div>
                                    <div class="icon-circle">
                                        <i class="fas fa-map-marker-alt fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-white card stat-card bg-gradient-info">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="card-title">Locataires</h5>
                                        <h2 class="display-6" id="locataire-count">0</h2>
                                    </div>
                                    <div class="icon-circle">
                                        <i class="fas fa-users fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="text-white card stat-card bg-gradient-warning">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h5 class="card-title">Paiements</h5>
                                        <h2 class="display-6" id="paiement-count">0</h2>
                                    </div>
                                    <div class="icon-circle">
                                        <i class="fas fa-money-bill-wave fa-2x"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Graphique (probablement spécifique à l'admin aussi) -->
                <div class="mt-4 row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Statistiques des Locations</h5>
                                <div class="chart-container">
                                    <canvas id="locationChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
             {% endif %}
            {% endblock %}
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Animation des compteurs
        function animateCount(element, target) {
            let current = 0;
            const increment = target / 100;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    clearInterval(timer);
                    current = target;
                }
                element.textContent = Math.floor(current);
            }, 10);
        }

        // Initialiser les compteurs et le graphique UNIQUEMENT si les éléments existent (spécifique admin)
        document.addEventListener('DOMContentLoaded', () => {
            const maisonCountElement = document.getElementById('maison-count');
            if (maisonCountElement) { // Vérifie si c'est la vue admin où les compteurs existent
                 animateCount(maisonCountElement, 42);
                 animateCount(document.getElementById('quartier-count'), 15);
                 animateCount(document.getElementById('locataire-count'), 78);
                 animateCount(document.getElementById('paiement-count'), 56);

                 // Graphique
                 const ctx = document.getElementById('locationChart');
                 if (ctx) {
                      const locationChart = new Chart(ctx.getContext('2d'), {
                          type: 'bar',
                          data: {
                              labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin'],
                              datasets: [{
                                  label: 'Locations par mois',
                                  data: [12, 19, 3, 5, 2, 3],
                                  backgroundColor: 'rgba(54, 162, 235, 0.7)',
                                  borderColor: 'rgba(54, 162, 235, 1)',
                                  borderWidth: 1
                              }]
                          },
                          options: {
                              responsive: true,
                              scales: {
                                  y: {
                                      beginAtZero: true,
                                      grid: {
                                          color: 'rgba(0, 0, 0, 0.05)'
                                      }
                                  },
                                  x: {
                                      grid: {
                                          display: false
                                      }
                                  }
                              },
                              plugins: {
                                  legend: {
                                      position: 'top',
                                  }
                              }
                          }
                      });
                 }
            }
        });
    </script>
</body>





</html>
    {% comment %} {% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* Styles généraux */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            color: #333;
        }

        /* Sidebar */
        .sidebar {
            background: linear-gradient(135deg, #2c3e50, #4ca1af);
            color: white;
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s ease;
            position: fixed;
            width: 250px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            font-weight: 600;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar li {
            margin-bottom: 15px;
            transition: transform 0.3s ease;
        }

        .sidebar li:hover {
            transform: translateX(5px);
        }

        .sidebar a {
            color: white;
            text-decoration: none;
            font-size: 1.1rem;
            display: block;
            padding: 10px 15px;
            border-radius: 5px;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.05);
        }

        .sidebar a:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: scale(1.02);
        }

        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 20px;
            transition: margin-left 0.3s ease;
        }

        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .header:hover {
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .header h1 {
            margin: 0;
            font-size: 2.2rem;
            font-weight: 700;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }

        /* Cartes */
        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            margin-bottom: 25px;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        .card-body {
            padding: 25px;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        /* Cartes statistiques */
        .stat-card {
            transition: all 0.4s ease;
            border: none;
            border-radius: 12px;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .bg-gradient-primary {
            background: linear-gradient(45deg, #0d6efd, #0a58ca);
        }

        .bg-gradient-success {
            background: linear-gradient(45deg, #198754, #146c43);
        }

        .bg-gradient-info {
            background: linear-gradient(45deg, #0dcaf0, #0997b3);
        }

        .bg-gradient-warning {
            background: linear-gradient(45deg, #ffc107, #e0a800);
        }

        .icon-circle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background-color: rgba(255, 255, 255, 0.2);
        }

        .stat-card:hover .icon-circle {
            transform: rotate(20deg) scale(1.1);
        }

        .display-6 {
            font-size: 2.5rem;
            font-weight: 700;
            animation: countUp 0.8s ease-out forwards;
            margin: 0;
        }

        /* Animation pour les nombres */
        @keyframes countUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Graphiques */
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
            margin-top: 20px;
        }

        /* Boutons et interactions */
        .btn-custom {
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-custom:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                min-height: auto;
                position: relative;
                margin-bottom: 20px;
            }
            .main-content {
                margin-left: 0;
            }
            .header h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>{{ user.username }}</h2>
        <ul>
            <li><a href="{% url 'maison_liste' %}"><i class="fas fa-home me-2"></i>Listes des Maisons</a></li>
            <li><a href="{% url 'Quatiers_list' %}"><i class="fas fa-map-marker-alt me-2"></i>Listes des Quartiers</a></li>
            <li><a href="{% url 'ville_list' %}"><i class="fas fa-city me-2"></i>Listes des villes</a></li>
            <li><a href="{% url 'liste_typechambres' %}"><i class="fas fa-bed me-2"></i>Type de chambre</a></li>
            <li><a href="{% url 'liste_chambres' %}"><i class="fas fa-door-open me-2"></i>Chambre</a></li>
            <li><a href="{% url 'liste_proprietaire' %}"><i class="fas fa-user-tie me-2"></i>Listes des Propriétaires</a></li>
            <li><a href="{% url 'liste_paiements' %}"><i class="fas fa-money-bill-wave me-2"></i>Paiement</a></li>
            <li><a href="{% url 'liste_locations' %}"><i class="fas fa-key me-2"></i>Liste de location</a></li>
            <li><a href="{% url 'utilisateurs_parchambre'%}">Voir les utilisateurs</a></li>
            <li><a href="{% url 'proprietaire_list_maison'%}">Proprietaireddddddddddddddddd</a></li>
            <li><a href="{% url 'signup'%}">creation de compte </a></li>
            



            <li><a href="#"><i class="fas fa-cog me-2"></i>Paramètres</a></li>
            <li><a href="#"><i class="fas fa-sign-out-alt me-2"></i>Déconnexion</a></li>
            
        </ul>
    </div>
    <div class="main-content">
        <div class="header">
            <h1>{% block header %}Tableau de Bord{% endblock %}</h1>
        </div>
        <div class="content">
            {% block content %}
            <!-- Contenu par défaut -->
            <div class="mb-4 row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="text-center card-body">
                            <h2 class="mb-3">Bienvenue, Administrateur !</h2>
                            <p class="lead">Cette section peut être utilisée pour afficher des statistiques, graphiques, rapports et autres informations pertinentes pour l'administration.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cartes statistiques -->
            <div class="row">
                <div class="col-md-3">
                    <div class="text-white card stat-card bg-gradient-primary">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h5 class="card-title">Maisons</h5>
                                    <h2 class="display-6" id="maison-count">0</h2>
                                </div>
                                <div class="icon-circle">
                                    <i class="fas fa-home fa-2x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="text-white card stat-card bg-gradient-success">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h5 class="card-title">Quartiers</h5>
                                    <h2 class="display-6" id="quartier-count">0</h2>
                                </div>
                                <div class="icon-circle">
                                    <i class="fas fa-map-marker-alt fa-2x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="text-white card stat-card bg-gradient-info">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h5 class="card-title">Locataires</h5>
                                    <h2 class="display-6" id="locataire-count">0</h2>
                                </div>
                                <div class="icon-circle">
                                    <i class="fas fa-users fa-2x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="text-white card stat-card bg-gradient-warning">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h5 class="card-title">Paiements</h5>
                                    <h2 class="display-6" id="paiement-count">0</h2>
                                </div>
                                <div class="icon-circle">
                                    <i class="fas fa-money-bill-wave fa-2x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Graphique -->
            <div class="mt-4 row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Statistiques des Locations</h5>
                            <div class="chart-container">
                                <canvas id="locationChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endblock %}
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Animation des compteurs
        function animateCount(element, target) {
            let current = 0;
            const increment = target / 100;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    clearInterval(timer);
                    current = target;
                }
                element.textContent = Math.floor(current);
            }, 10);
        }

        // Initialiser les compteurs
        document.addEventListener('DOMContentLoaded', () => {
            animateCount(document.getElementById('maison-count'), 42);
            animateCount(document.getElementById('quartier-count'), 15);
            animateCount(document.getElementById('locataire-count'), 78);
            animateCount(document.getElementById('paiement-count'), 56);

            // Graphique
            const ctx = document.getElementById('locationChart').getContext('2d');
            const locationChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin'],
                    datasets: [{
                        label: 'Locations par mois',
                        data: [12, 19, 3, 5, 2, 3],
                        backgroundColor: 'rgba(54, 162, 235, 0.7)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
 {% endcomment %}
