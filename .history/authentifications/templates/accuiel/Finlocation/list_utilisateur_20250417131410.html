{% extends "accuiel/base.html" %}

{% block content %}
<style>
    body { font-family: sans-serif; }
    .chambre-item { border: 1px solid #ccc; padding: 15px; margin-bottom: 10px; border-radius: 5px; }
    .chambre-item h3 { margin-top: 0; }
</style>
</head>
<body>
<h1>Liste des Chambres Disponibles</h1>

{% if chambres_libres %}
    {% for chambre in chambres_libres %}
        <div class="chambre-item">
            <h3>Chambre {{ chambre.id }} - Type : {{ chambre.type_chambre.nom }}</h3>
            <p><strong>Surface :</strong> {{ chambre.surface }} m²</p>
            <p><strong>Prix :</strong> {{ chambre.prix }} FCFA / mois</p>
            <p><strong>Description :</strong> {{ chambre.description|default:"Aucune description" }}</p>
            
            {% if chambre.maison %}
                <p><strong>Maison :</strong> {{ chambre.maison.nom }} (Adresse : {{ chambre.maison.adresse }})</p>
                {% if chambre.maison.proprietaire %}
                    <p><strong>Propriétaire :</strong> {{ chambre.maison.proprietaire.prenom }} {{ chambre.maison.proprietaire.nom }}</p>
                {% else %}
                    <p><strong>Propriétaire :</strong> Information non disponible</p>
                {% endif %}
            {% else %}
                 <p><strong>Maison :</strong> Information non disponible</p>
            {% endif %}
            
            <p><em>État : {{ chambre.get_etat_display|upper }}</em></p> 
            <!-- get_etat_display donne la version lisible du choix -->
        </div>
    {% endfor %}
{% else %}
    <p>Aucune chambre n'est actuellement libre.</p>
{% endif %}

</body>
{% endblock %}