{% extends 'accuiel/base.html' %}
{% load static %}

{% block title %}Messagerie{% endblock %}





{% block content %}
<div class="messenger">
    <div class="sidebar">
        <h2>Utilisateurs</h2>
        <ul class="user-list">
            {% for user in users %}
            <li class="user" onclick="selectUser({{ user.id }})">
                <img src="{{ user.image.url }}" alt="photo" class="user-photo">
                <span>{{ user.prenom }} {{ user.nom }}</span>
            </li>
            {% endfor %}
        </ul>
    </div>

    <div class="chat-area">
        <div class="chat-header">
            <h3 id="chat-with">Sélectionner un utilisateur</h3>
        </div>

        <div class="chat-messages" id="chat-messages">
            <!-- Messages apparaîtront ici -->
        </div>

        <form id="message-form" onsubmit="sendMessage(event)">
            <input type="text" id="message-input" placeholder="Écrire un message..." autocomplete="off" required>
            <button type="submit">Envoyer</button>
        </form>
    </div>
</div>




<script>
function selectUser(userId) {
    document.getElementById('chat-with').innerText = "Chat avec l'utilisateur #" + userId;
}

function sendMessage(event) {
    event.preventDefault();
    const messageInput = document.getElementById('message-input');
    const chatMessages = document.getElementById('chat-messages');

    if (messageInput.value.trim() !== '') {
        const newMessage = document.createElement('div');
        newMessage.className = 'chat-message';
        newMessage.innerText = messageInput.value;
        chatMessages.appendChild(newMessage);

        messageInput.value = '';
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }
}
</script>
{% endblock %}
