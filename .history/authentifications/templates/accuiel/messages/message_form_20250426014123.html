{% extends 'accuiel/base.html' %}
{% block content %}
<h1>Conversation avec 
    {% if message.is_group_message %}
        Groupe ({{ message.group_receivers.count }} membres)
    {% else %}
        {{ message.receiver.username }}
    {% endif %}
</h1>

<div class="messages">
    {% for msg in messages %}
        <div class="message {% if msg.sender == request.user %}sent{% else %}received{% endif %}">
            <p>{{ msg.message }}</p>
            <small>{{ msg.timestamp }}</small>
        </div>
    {% endfor %}
</div>

<form method="post" action="{% url 'message_create' %}">
    {% csrf_token %}
    <input type="hidden" name="receiver" value="{{ message.receiver.id }}">
    <textarea name="message" placeholder="Votre message..."></textarea>
    <button type="submit">Envoyer</button>
</form>
{% endblock %}












