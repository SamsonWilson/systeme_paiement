{% extends "accuiel/base.html" %}
{% block content %}

    {% comment %} <h1>Tableau de bord : {{ locataire.username }}</h1> {% endcomment %}
    {% if request.user.is_authenticated %}
    <li><a href="{% url 'locataire_dashboard' request.user.id %}">Voir le tableau de bord</a></li>
  {% endif %}
  
    <h2>Locations Actuelles</h2>
    {% if locations %}
        <table>
            <thead>
                <tr>
                    <th>Chambre</th>
                    <th>Début</th>
                    <th>Montant Total</th>
                    <th>Statut</th>
                </tr>
            </thead>
            <tbody>
                {% for location in locations %}
                <tr>
                    <td>{{ location.chambre }}</td>
                    <td>{{ location.date_debut_location }}</td>
                    <td>{{ location.montant_total }}</td>
                    <td>{{ location.statut_paiement }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Aucune location actuelle.</p>
    {% endif %}

    <h2>Paiements</h2>
    {% if paiements %}
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Montant</th>
                    <th>Mode de Paiement</th>
                    <th>Statut</th>
                </tr>
            </thead>
            <tbody>
                {% for paiement in paiements %}
                <tr>
                    <td>{{ paiement.date_paiement }}</td>
                    <td>{{ paiement.montant_paye }}</td>
                    <td>{{ paiement.mode_paiement }}</td>
                    <td>{{ paiement.statut_paiement }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Aucun paiement enregistré.</p>
    {% endif %}

    <h2>Fin des Locations</h2>
    {% if fins_locations %}
        <table>
            <thead>
                <tr>
                    <th>Date de Fin</th>
                    <th>Montant Restant</th>
                    <th>Raison</th>
                </tr>
            </thead>
            <tbody>
                {% for fin_location in fins_locations %}
                <tr>
                    <td>{{ fin_location.date_fin_location }}</td>
                    <td>{{ fin_location.montant_restant }}</td>
                    <td>{{ fin_location.raison_fin }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Aucune location terminée.</p>
    {% endif %}

{% endblock %}